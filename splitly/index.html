<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0f">
    <title>Splitly â€” ToolKit</title>

    <link rel="stylesheet" href="../shared/css/index.css">
    <link rel="stylesheet" href="splitly.css">
</head>
<body>
    <div class="bg-orbs">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <header class="app-header">
        <div class="app-header-inner">
            <div class="logo-group">
                <a href="/CookBook/" class="back-link">&larr; ToolKit</a>
                <h1 class="logo">Split<span>ly</span></h1>
            </div>
            <div class="header-actions">
                <button class="btn btn-secondary" onclick="window.Splitly.openManagePeople()">Manage People</button>
                <button class="btn btn-secondary" onclick="window.Splitly.openDataModal()">Data</button>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- Summary Cards -->
            <section class="summary-section">
                <div id="summary-grid" class="summary-grid"></div>
            </section>

            <!-- Add Entry Form -->
            <section class="add-section">
                <div class="add-form">
                    <div id="person-quick-btns" class="person-quick-btns"></div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="entry-amount">Amount</label>
                            <input type="number" id="entry-amount" placeholder="0.00" step="0.01" min="0">
                        </div>
                        <div class="form-group">
                            <label for="entry-note">Note (optional)</label>
                            <input type="text" id="entry-note" placeholder="e.g. Aldi weekly shop">
                        </div>
                        <div class="form-group">
                            <label for="entry-date">Date</label>
                            <input type="date" id="entry-date">
                        </div>
                        <div class="form-group">
                            <label for="entry-time">Time</label>
                            <input type="time" id="entry-time">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn" onclick="window.Splitly.addEntry()">Add Entry</button>
                    </div>
                </div>
            </section>

            <!-- Filters -->
            <div class="filters-bar">
                <button class="btn btn-pill active" data-period="all" onclick="window.Splitly.setPeriod('all')">All</button>
                <button class="btn btn-pill" data-period="today" onclick="window.Splitly.setPeriod('today')">Today</button>
                <button class="btn btn-pill" data-period="week" onclick="window.Splitly.setPeriod('week')">This Week</button>
                <button class="btn btn-pill" data-period="month" onclick="window.Splitly.setPeriod('month')">This Month</button>
                <button class="btn btn-pill" data-period="ytd" onclick="window.Splitly.setPeriod('ytd')">YTD</button>
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="Search entries..." oninput="window.Splitly.renderEntries()">
                </div>
            </div>

            <!-- Entries List -->
            <section class="entries-section">
                <div class="section-header">
                    <span class="section-title">Entries</span>
                    <span class="entry-count-label" id="entry-count-label"></span>
                </div>
                <div id="entries-list" class="entries-list"></div>
            </section>
        </div>
    </main>

    <!-- Manage People Modal -->
    <div id="people-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2>Manage People</h2>
                <button class="modal-close" onclick="window.Splitly.closePeopleModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="text-secondary text-small mb-2">Add people for quick selection when logging grocery payments.</p>
                <div class="people-manager-row">
                    <div class="form-group" style="flex:1; margin-bottom: 0;">
                        <label for="new-person-name">Name</label>
                        <input type="text" id="new-person-name" placeholder="Enter name..." onkeydown="if(event.key==='Enter')window.Splitly.addPerson()">
                    </div>
                    <button class="btn" onclick="window.Splitly.addPerson()" style="align-self: flex-end;">Add</button>
                </div>
                <div id="people-tags" class="people-tags mt-2"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.Splitly.closePeopleModal()">Done</button>
            </div>
        </div>
    </div>

    <!-- Data Modal -->
    <div id="data-modal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h2>Data Management</h2>
                <button class="modal-close" onclick="window.Splitly.closeDataModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="text-secondary text-small mb-2">Export or import your data. All data is stored locally in your browser.</p>
                <div class="data-actions">
                    <button class="btn" onclick="window.Splitly.exportData()">Export JSON</button>
                    <button class="btn btn-secondary" onclick="document.getElementById('import-file').click()">Import JSON</button>
                    <input type="file" id="import-file" accept=".json" style="display:none" onchange="window.Splitly.importData(event)">
                </div>
                <div class="data-section">
                    <p class="text-muted text-small mb-1">Danger zone</p>
                    <button class="btn btn-danger btn-small" onclick="window.Splitly.clearAllData()">Clear All Data</button>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.Splitly.closeDataModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirm Modal -->
    <div id="delete-modal" class="modal-overlay">
        <div class="modal small">
            <div class="modal-header">
                <h2>Delete Entry?</h2>
                <button class="modal-close" onclick="window.Splitly.closeDeleteModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p class="text-secondary">This cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="window.Splitly.closeDeleteModal()">Cancel</button>
                <button class="btn btn-danger" onclick="window.Splitly.confirmDelete()">Delete</button>
            </div>
        </div>
    </div>

    <script type="module" src="splitly.js"></script>
</body>
</html>
